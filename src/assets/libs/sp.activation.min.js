/**
 * @license
 * Plugin 5.4.5-theplatform <http://youbora.com/>
 * Copyright NicePeopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.plugins.ThePlatform=function(e,t){try{this.pluginName="theplatform",this.pluginVersion="5.4.5-theplatform",1!=arguments.length&&e?(this.startMonitoring(e,t),this.registerListeners(t.scope)):$pdk?(t=e||t,this.startMonitoring($pdk.controller,t),this.registerListeners(t.scope)):$YB.error("PDK not found. Youbora needs to be initialized after thePlatform PDK.")}catch(a){$YB.error(a)}},$YB.plugins.ThePlatform.prototype=new $YB.plugins.Generic,$YB.plugins.ThePlatform.prototype.getPlayhead=function(){return this.playhead},$YB.plugins.ThePlatform.prototype.getMediaDuration=function(){return this.duration},$YB.plugins.ThePlatform.prototype.getIsLive=function(){return this.isLive},$YB.plugins.ThePlatform.prototype.getTitle=function(){return this.title},$YB.plugins.ThePlatform.prototype.getResource=function(){return this.resource},$YB.plugins.ThePlatform.prototype.getPlayerVersion=function(){return"ThePlatform "+($pdk?$pdk.version.toString():"")},$YB.plugins.ThePlatform.prototype.getBitrate=function(){return this.bitrate},$YB.plugins.ThePlatform.prototype.getRendition=function(){return this.bitrate>0?this.bitrate:null},$YB.plugins.ThePlatform.prototype.registerListeners=function(e){try{this.adnalyzer=new $YB.adnalyzers.ThePlatform(this,e),$YB.utils.listenAllEvents(this.player,[null,"OnMediaPause","OnMediaUnpause","OnClipInfoLoaded","OnMediaBuffering","OnMediaEnd","OnMediaError","OnVersionError","OnMediaPlay","OnMediaSeek","OnMediaStart","OnMediaLoadStart","OnResetPlayer","OnReleaseEnd","OnReleaseStart","OnReleaseSelected"]),this.enableBufferMonitor();var t=this;this.player.addEventListener("OnReleaseStart",function(e){if(e.data.baseClips){t.isMid=!1;var a;for(var n in e.data.baseClips)if(a=e.data.baseClips[n],!a.isAd){t.resource=a.URL,t.title=a.title,t.duration=a.trueLength/1e3,t.isLive="nonstop"==a.expression,t.bitrate=a.bitrate?a.bitrate:-1;break}}for(var n=0;n<20;n++)if("{tp_aid}"===t.infoManager.options.extraParams["param"+(n+1)]){t.infoManager.options.extraParams["param"+(n+1)]=e.data.accountID;break}t.playHandler()},e),this.player.addEventListener("OnMediaLoadStart",function(e){e.data.baseClip.contentCustomData&&e.data.baseClip.contentCustomData.isException?t.errorHandler(e.data.baseClip.contentCustomData.responseCode,e.data.baseClip.contentCustomData.exception):e.data.baseClip.isAd||(t.duration=e.data.baseClip.trueLength/1e3,t.bitrate=e.data.baseClip.bitrate?e.data.baseClip.bitrate:-1)},e),this.player.addEventListener("OnRenditionSwitched",function(e){t.bitrate=e.newRendition},e),this.player.addEventListener("OnMediaEnd",function(e){t.viewManager.lastResume=(new Date).getTime()},e),this.player.addEventListener("OnMediaPlaying",function(e){t.viewManager.isShowingAds||(t.playhead=e.data.currentTimeAggregate?e.data.currentTimeAggregate/1e3:e.data.currentTime/1e3,t.viewManager.isBuffering||(t.viewManager.isJoinSent?t.viewManager.isSeeking&&t.playhead>t.seekingTo&&(t.viewManager.lastResume=(new Date).getTime(),t.seekedHandler()):(t.joinHandler(),t.isMid=!0)))},e),this.player.addEventListener("OnMediaPause",function(e){t.pauseHandler()},e),this.player.addEventListener("OnMediaUnpause",function(e){t.resumeHandler()},e),this.player.addEventListener("OnReleaseEnd",function(e){t.endedHandler(),t.isMid=!1,t.resetValues()},e),this.player.addEventListener("OnMediaError",function(e){e.data.clip.baseClip.isAd?t.joinHandler():(t.resource=e.data.clip.URL||e.data.baseClip.URL,t.title=e.data.clip.title,t.duration=e.data.clip.mediaLength/1e3,t.errorHandler(e.data.friendlyMessage||e.data.message),t.endedHandler())},e),this.player.addEventListener("OnMediaSeek",function(e){t.seekingHandler(),t.seekingTo=e.data.end.currentTimeAggregate?e.data.end.currentTimeAggregate/1e3:e.data.end.currentTime/1e3},e)}catch(a){$YB.error(a)}},$YB.plugins.ThePlatform.prototype.resetValues=function(){this.resource=null,this.title=null,this.duration=null,this.seekingTo=null,this.playhead=null,this.duration=null,this.bitrate=null,this.isLive=null});
/**
 * @license
 * Adnalyzer 5.4.2-theplatform <http://youbora.com/>
 * Copyright NicePeopleAtWork <http://nicepeopleatwork.com/>
 */
"undefined"!=typeof $YB&&($YB.adnalyzers.ThePlatform=function(e,t){try{this.adnalyzerVersion="5.4.2-theplatform",this.startMonitoring(e,e.player),this.registerListeners(t)}catch(a){$YB.error(a)}},$YB.adnalyzers.ThePlatform.prototype=new $YB.adnalyzers.Generic,$YB.adnalyzers.ThePlatform.prototype.getAdResource=function(){return this.resource},$YB.adnalyzers.ThePlatform.prototype.getAdPlayhead=function(){return this.playhead?this.playhead:0},$YB.adnalyzers.ThePlatform.prototype.getAdPosition=function(){return this.adPosition},$YB.adnalyzers.ThePlatform.prototype.getAdDuration=function(){return this.duration},$YB.adnalyzers.ThePlatform.prototype.getAdBitrate=function(){return this.bitrate},$YB.adnalyzers.ThePlatform.prototype.getAdTitle=function(){return this.title},$YB.adnalyzers.ThePlatform.prototype.getAdPlayerVersion=function(){return"ThePlatform "+($pdk?$pdk.version.toString():"")},$YB.adnalyzers.ThePlatform.prototype.registerListeners=function(e){this.enableAdBufferMonitor();var t=this;this.ads.addEventListener("OnMediaLoadStart",function(e){e.data.baseClip.isAd&&(t.duration=e.data.baseClip.releaseLength/1e3,t.bitrate=e.data.baseClip.bitrate?e.data.baseClip.bitrate:-1,t.resource=e.data.baseClip.URL,t.title=e.data.title,t.adPosition=t.plugin.isMid?"mid":"pre",t.playAdHandler())},e),this.ads.addEventListener("OnMediaError",function(e){t.plugin.viewManager.isShowingAds&&(t.errorAdHandler(e.data.friendlyMessage||e.data.message),t.endedAdHandler())},e),this.ads.addEventListener("OnMediaEnd",function(e){t.endedAdHandler(),t.resetValues()},e),this.ads.addEventListener("OnMediaPlaying",function(e){t.plugin.viewManager.isShowingAds&&(t.playhead=e.data.currentTimeAggregate?e.data.currentTimeAggregate/1e3:e.data.currentTime/1e3,t.joinAdHandler())},e),this.ads.addEventListener("OnMediaPause",function(e){t.pauseAdHandler()},e),this.ads.addEventListener("OnMediaUnpause",function(e){t.resumeAdHandler()},e)},$YB.adnalyzers.ThePlatform.prototype.resetValues=function(){this.resource=null,this.title=null,this.duration=null,this.playhead=null,this.duration=null,this.bitrate=null,this.adPosition=null}),$pdk&&$pdk.controller&&($pdk.ns("$pdk.plugin.youbora"),$pdk.plugin.youbora=$pdk.extend(function(){},{VERSION:"1.0",constructor:function(){tpDebug("Youbora Plugin instantiated.")},initialize:function(e){if(e.vars.accountCode){var t={accountCode:e.vars.accountCode,extraParams:{}};if(e.vars.extraparams)for(var a=e.vars.extraparams.split(","),r=0;r<a.length;r++)t.extraParams["param"+(r+1)]=a[r];window.youboraAnalytics=new $YB.plugins.ThePlatform(e.controller,t)}}}),$pdk.controller.plugInLoaded(new $pdk.plugin.youbora,null));
